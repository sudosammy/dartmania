<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dartmania</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div id="app">
      <header class="topbar">
        <button id="theme-toggle" class="nav-button theme-nav-button">Theme: Classic</button>
        <div class="brand">
        </div>
        <div id="top-game-mode" class="top-game-mode"></div>
        <nav class="nav-actions">
          <button id="back-to-game" class="nav-button hidden">Back to Game</button>
          <button class="nav-button" data-nav="setup">New Game</button>
          <button class="nav-button" data-nav="history">History</button>
          <button class="nav-button" data-nav="rules">Rules</button>
        </nav>
      </header>

      <main>
        <section id="screen-setup" class="screen active">
          <h1>Players</h1>
          <div class="player-count">
            <span>Select number of players</span>
            <div class="count-buttons" id="player-count-buttons"></div>
          </div>
          <div id="player-names" class="player-names"></div>
          <button id="to-mode" class="primary-button">Continue</button>
        </section>

        <section id="screen-mode" class="screen">
          <h1>Choose Game Type</h1>
          <div class="mode-grid">
            <button class="mode-card" data-mode="countdown">
              <div class="mode-title">Countdown</div>
              <p>Start high, finish at zero.</p>
            </button>
            <button class="mode-card" data-mode="countup">
              <div class="mode-title">Countup</div>
              <p>Build score to the target.</p>
            </button>
            <button class="mode-card" data-mode="cricket">
              <div class="mode-title">Cricket</div>
              <p>Close 15-20 and bull.</p>
            </button>
          </div>
        </section>

        <section id="screen-format" class="screen">
          <h1>Game Settings</h1>
          <div id="format-options" class="format-options"></div>
          <div class="rounds-config">
            <span>Rounds</span>
            <div class="rounds-controls">
              <button id="rounds-plus" class="mini-button">+</button>
              <div id="rounds-value" class="rounds-value">10</div>
              <button id="rounds-minus" class="mini-button">-</button>
            </div>
          </div>
          <div class="toggle-row">
            <label class="toggle">
              <input id="double-out" type="checkbox" />
              <span class="slider"></span>
              <span class="label">Double out required</span>
            </label>
          </div>
          <button id="start-game" class="primary-button start-game">Start Game</button>
        </section>

        <section id="screen-game" class="screen">
          <div class="game-header">
            <div class="active-player">
              <div id="active-player-name" class="active-name"></div>
              <div id="active-player-score" class="active-score"></div>
              <div class="player-meta">
                <div id="game-rounds" class="info-card"></div>
                <div id="dart-count" class="info-card"></div>
              </div>
            </div>
            <div class="header-actions">
              <button id="undo" class="secondary-button">Undo</button>
              <button id="end-game" class="danger-button">End Game</button>
            </div>
          </div>

          <div class="game-content">
            <div class="dartboard-panel">
              <div class="board-stack">
                <div class="board-toggle-top">
                  <button id="board-view-btn" class="toggle-button">Cricket</button>
                </div>
                <div class="board-wrapper">
                  <canvas id="dartboard"></canvas>
                  <button id="miss-btn" class="miss-button">Miss!</button>
                </div>
              </div>
              <div id="cricket-board" class="cricket-board hidden"></div>
              <div id="cricket-footer" class="cricket-footer hidden">
                <div id="game-rounds-bottom" class="info-card"></div>
                <div id="dart-count-bottom" class="info-card"></div>
              </div>
            </div>

            <div class="side-panel">
              <div class="scoreboard" id="scoreboard"></div>
              <div class="throw-history">
                <h3>Throw History</h3>
                <div id="throw-history-list" class="throw-history-list"></div>
              </div>
              <div class="out-combos">
                <h3>Checkout Combos</h3>
                <ul id="out-combo-list"></ul>
              </div>
            </div>
          </div>
          <div id="bust-overlay" class="bust-overlay hidden">BUST!</div>
        </section>

        <section id="screen-end" class="screen">
          <div id="podium" class="podium"></div>
          <div id="podium-chart" class="podium-chart hidden">
            <div id="chart-player-buttons" class="chart-player-buttons"></div>
            <div class="chart-area">
              <div id="chart-y-axis" class="chart-y-axis"></div>
              <div id="chart-line" class="chart-line"></div>
            </div>
            <div id="chart-x-axis" class="chart-x-axis"></div>
          </div>
          <div id="podium-cricket-board" class="cricket-board podium-cricket-board hidden"></div>
          <button id="play-again" class="primary-button">New Game</button>
        </section>

        <section id="screen-history" class="screen">
          <h1>Game History</h1>
          <div id="history-list" class="history-list"></div>
        </section>

        <section id="screen-rules" class="screen">
          <h1>Game Rules</h1>
          <div class="rules-card">
            <h2>Countdown</h2>
            <p>Start at 301, 501, or 701 and reduce to zero. You must finish on an exact score; if you bust, your round is forfeited.</p>
            <p>Double out mode requires your final dart to land in a double ring (or double bull).</p>
          </div>
          <div class="rules-card">
            <h2>Countup</h2>
            <p>Build your score up to the target. You must reach the exact score to win. If you exceed it, the round is forfeited.</p>
            <p>With âˆž mode, play the chosen rounds and highest score wins.</p>
          </div>
          <div class="rules-card">
            <h2>Cricket</h2>
            <p>Cut-throat rules: hit 15-20 and bull three times to close each number. After you close a number, extra hits add points to opponents who have not closed it. Close all and have the lowest score to win.</p>
          </div>
        </section>
      </main>
    </div>

    <script src="/app.js"></script>
  </body>
</html>
